# 자바 메모리 관리

클래스로더는 자바 라이브러리, 클래스 파일과 상호작용하고,
자바 프로세스 메모리는 텍스트, 데이터, 힙, 스택 등 네이티브 메모리 영역과,

클래스로더<->
    JVM 메모리:
        메서드 영역
        자바 힙 객체
        스레드 별:
            자바 스택{메서드, 파라미터, 로커 변수}
            자바 PC 레지스터{프로그램 카운터}
실행 엔진<->    <->자바 네이티브 인터페이스 <-> 네이티브 라이브러리
    {컴파일러, 가비지 컬렉터}

로 구성되어 있다.

VM 힙 메모리는 네이티브 힙 영역 중 일부이며,
자바 스택은 네티이브 스택 기반 위에서 구동되며,
VM의 실행 모듈 및 관련 라이브러리는 네이티브 텍스트에 존재한다.
자바 애플리케이션 라이브러리 jar, zip은 네이티브 영역에 Memory Mapped File 형태로 위치한다.

### 가비지 컬렉션

전담 스레드가 실행함

객체가 변수 가시구역(Visible Area)에 벗어나 있고, 참조(Reference)하는 다른 객체가 없어졌을 때 발생한다.
참조하는 객체도 변수 가시구역에 없고, 참조하는 다른 객체가 없으면 GC 대상이 된다.

이런 조건을 찾다 보면 스택 내 로컬 변수, 싱글턴 구조의 정적 변수만 남게 된다.

GC 동안 메모리 체크, 정리하는 작업으로 애플리케이션 동작이 멈추므로, GC 최적화는 중요하다.