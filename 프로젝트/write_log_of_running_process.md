(이전 : [](프로젝트\Linux_Security_model.md))

* 실행되는 프로세스 로그 남기기

소스 분석을 통해 찾은 security_bprm_check 함수가 프로세스를 필터링하기 적당한 함수인지 테스트해보자.
로그를 출력하기 위해 커널 소스(~kernel/security/security.c)다음과 같이 수정한다.

> [security_bprm_check](프로젝트\소스\chunks\security_1.c)

linux_binprm 구조체는 실행되려는 파일 경로를 filename 변수로 가지고 있다.

수정이 끝났으면 커널 이미지인 bzImage만 재빌드하고 설치해 재부팅하자.

>make -j5 bzImage
>make install
>reboot

재부팅한 후 pss로 시작하는 부분을 찾아보자.

>dmesg | grep -i pss

프로세스들을 잘 출력하기는 하지만, 부팅 시 약 3000개의 프로세스가 실행되면서 속도가 현저히 느려진다.

프로토타입에서 잠재적인 위험 요소(성능 저하)를 발견했다. 개발 막바지에 이런 문제를 발견했다면 PM이나 사용자와 협의한 후 요구사항을 변경하구 일부 코드를 수정하고 테스트를 반복해야 한다. 이것이 신뢰 문제이다.

다행히 프로토타입을 통해 성능 저하 문제를 조기해 발견했다. PM에게 보고했고, PM은 사용자와 협의해 다음과 같이 요구사항을 수정했다.

* IoT 전등에서 부팅 관련된 프로세스 파일들은 읽기 전용 파티션에 존재한다.
* 파일 쓰기가 가능한 곳은 /home뿐이다.
* 따라서 /home 이하 디렉터리에서 실행되는 프로세스만 검사하자.

이렇게 요구사항을 수정하면 부팅 과정에서 실행되는 프로세스는 검사에서 제외되므로 검사 대상이 줄들게 된다.
UML 전체 흐름도의 하단에는 각 단계에서 도출해 다음 단계에서 사용할 사항을 기록해야 한다.
