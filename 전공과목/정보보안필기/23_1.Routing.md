# 라우팅

정적 라우팅 : 수동

동적 라우팅 : 자동

* 라우티드 프로토콜 : TCP/IP, IPX, AppleTalk

* 라우팅 프로토콜 : RIP, IGRP, OSPF, EIGRP

* AS(Autonomous System) : 관리 도메인에 속해 있는 라우터들의 집합

* AS 내에 운영되는 라우팅 프로토콜 : IGP (Interior Gateway Protocol)

* AS 간 라우팅 정보 교환하기 위한 프로토콜 : EGP (Exterior Gateway Protocol)

## 유니캐스트 라우팅

### 라우팅 알고리즘

* 거리백터 라우팅 (Distance-Vector)

    경로를 제공하지 않고 목적지까지의 최소비용만을 제공한다.
    A [A:0, B:2, (B->)C:7, (A->)D: 3, (B->)E:6]

* 링크-상태 라우팅 (Link-State DB)

    네트워크의 완전한 Map이 필요하다.
    플러딩을 통해 가능하다.

    |  |A| B| C| D| E| F| G|
    |--|-|--|--|--|--|--|--|
    |A|0|--|--|--|--|--|--|
    |B|-|0|--|--|--|--|--|
    |C|-|--|0|--|--|--|--|
    |D|-|--|--|0|--|--|--|
    |E|-|--|--|--|0|--|--|
    |F|-|--|--|--|--|0|--|
    |G|-|--|--|--|--|--|0|

* 경로 벡터 라우팅(Path-Vector)

    스패닝 트리를 이용한다. (최소비용 트리는 아니다)
    근원지는 가장 최선의 규칙을 사용하는 경로를 선택할 수 있다.

### 유니캐스트 라우팅 프로토콜

* RIP (Router Information Protocol)

    거리벡터 라우팅 기반 Intra-Domain Routing Protocol이다.
    네트워크 수를 의미하는 `홉 카운트`를 사용한다.
    15홉 이내의 반지름을 가진 AS 내부에서 사용한다.

    3개의 세로줄을 가지는 `포워딩 테이블`을 가진다.

    |목적지 네트워크|다음 라우터|홉 수|
    |--------------|---------|------|
    |N1 |-- |1 |
    |N2 |-- |1 |
    |N3 | R2 |2|
    |N4 | R2 |3|

  * RIP 구현

    Bellman-Ford
    RIP-1, RIP-2의 두 가지 버전이 있다.

    * 문제점

    홉수 15 이상인 네트워크에 사용할 수 없다.
    홉 수만 저장하므로 회선속도 등 다른 정보를 반영할 수 없다.
    네트워크에 변화가 생겼을 시 즉시 라우팅 경로에 반영하지 못해 특정 경로에 루프가 생길 수 있다.

    * 해결방안

      * Triggered Update : 홉수 변경 시 즉시 통보한다.

      * Hold down : 매트릭이 무한대인 경로에 대해서는 전체 네트워크 경로가 갱신될 떄까지 기다린다.

      * Split horizon : A->B로 보낸 정보는 다시 B->A로 보내지 않는다.

      * Poisoning : 회선 고장 감지 시 즉시 해당 매트릭을 16으로 지정한다.

* RIPv2

    RIPv1에 서브넷마스크 식별, 경로정보 인증, AS 구별, 브로드캐스트, 멀티캐스트 전송 등 기능이 추가되었다.

* Interior Gateway Routing Protocol

    홉수에 더해 다양한 네트워크 파라미터를 이용해 거리벡터를 계산한다.

  * 요소

    * 대역폭
    * 지연 (1~2^24), 1/10^6초 단위 (1ns)
    * 신뢰도 (1~255)
    * 부하 (1~255), 255= 100% 이용됨
    * MTU : 회선의 최대 프레임 크기

* Enhanced Interior GRP)

    VSLM 지원, 라우팅 정보가 네트워크 전역으로 전달되는데 시간이 오래 걸리는 문제점
    IGRP 확장

  * 특징

    수렴속도가 빠르고 부분 갱신 지원
    DUAL(Diffusing-Update Algorithm),루프 방지 기능 제공
    패킷 손실 없이 재라우팅 가능

* Open Shortest Path First

    RIP와 같은 종류의 인트라 도메인 라우팅 프로토콜
    링크-상태 기반
    플러딩 과정 수행
    다익스트라 알고리즘 이용
    링크 상태 변화 시 라우터 교환
    빠른 수렴시간, 자신에게 직접 연결된 망 정보만 전달
    멀티캐스트 방식

* Border Gateway Protocol v4

    유일한 Inter-도메인 라우팅 프로토콜
    경로 벡터 알고리즘
    홉수 대신 AS 번호를 매트릭으로 사용함