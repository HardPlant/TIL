# DOS

정당한 사용자가 정보 시스템의 데이터나 자원을 적절한 대기 시간 내에 사용하는 것을 방해

* 소프트웨어 취약점 공격(Poision 패킷), Flooding 유형 공격으로 구분 가능

거부공격 유형

* Logic Attacks

    Software Exploit
        Ping of death
    IP Header Spoofing
        Fragment
        LAND
        SMURF
        Xmas
        TCP full
        IP null
        Fraggle

* Flooding Attacks

    Single Source Point
        TCP SYN
        UDP
        Mstream
        TCP RST
        ICMP

    Multi Source Point
        TFN
        Trinoo
        Stacheldraht
        TFN2k
        Shaft

## TCP SYN flooding attack

TCP Connection 중 3-Way Handshake에서 Half-open 가능
대상은 외부로부터 접속 요청을 더 받아들일 수 없게 됨

공격자는 다수의 SYN 신호를 보내 서버가 SYN/ACK를 보내며, 이를 반송하지 않으면 timeout 발생

* 시작 주소 Spoofing

조작된 시작 주소시 - 시스템의 네트워크 코드에서 raw socket interface를 이용해 사용가능

### 공격 방법

* SYN 메시지를 많이 보낸다. 이때 발신 주소는 조작된 주소이다.

* 응답이 오지 않으므로, 서버는 연결요청이 실패했다고 생각할 떄까지 SYN-ACK를 보낸다.

* 연결 실패 시점까지 TCP 연결 테이블에 해당 연결이 남게 되어, 그 전 시점까지 TCP 연결 테이블에는 해당 정보가 자리를 차지하고 있다.

### 보안 대책

* IDS/IPS 설치

* Syn_cookie를 이용해 SYN_ACK 패킷에 임의로 생성되는 Squence 넘버 대신 서버에서 암호화 기술을 이용해 인증 정보가 담긴 시퀀스 넘버를 생성해 클라이언트에 보낸다.

    클라이언트에서 SYN패킷을 받으면 Syn_cookie만 보내고 세션을 닫는다. 그러면 세션을 열고 기다릴 필요가 없어 SYN Flooding 공격이 통하지 않게 된다.

* 또는 Timeout 타이머의 시간을 짧게 설정한다.

* 연결요청의 큐 사이즈를 늘린다. 하지만 단순한 큐 사이즈 중가는 자원 감소의 우려가 있다.

## SMURF Attack (Fraggle : ICMP 대신 UDP)

공격자가 패킷의 발신 주소를 피해자의 IP 주소로 바꿔 다수의 시스템에 브로드캐스트해 피해자를 공격하는 방법이다.

### 공격방법

* 공격자는 IP를 공격대상 IP 주소로 위장해 ICMP를 브로드캐스트로 다수의 시스템에 전송한다.

* 다수의 시스템은 ICMP Echo 패킷을 공격대상으로 보낸다.

* 다수의 시스템은 브로드캐스트에 대한 응답으로 ICMP Echo를 발생시키기 떄문에 증폭 네트워크라고 불리게 된다. (Amplification Attack)

### 보안대책

* 중간매개지 방어 : 라우터에서 다른 네트워크로부터 자신의 네트워크로 들어오는 IP Directed 브로드캐스트 패킷을 막도록 설정한다.

* IP Broadcast로 전송된 ICMP 패킷에 대해 응답을 하지 않는다.

### DNS Amplification 공격

정상적인 DNS 서버를 중간시스템으로 둔다. DNS 프로토콜은 적은 양의 요청패킷을 훨씬 많은 수의 응답패킷을 변환시켜 효과를 극대화한다.

## Flooding Attack

네트워크 링크에 과부하를 거는 것이다.
ICMP, UDP, TCP SYN 등을 사용하게 되지만, 다른 종류의 패킷도 사용 가능하다.
하지만 다른 종류의 패킷은 상대적으로 많이 사용되지 않기 때문에 눈에 띄기 쉽고 제어당하기 쉽다.

### ICMP Flood

Echo Request를 사용한다. (SMURF 공격)
네트워크 상태 감지에 유용해서, 네트워크 관리자들이 이런 종류의 패킷을 허용해 왔기 때문에 사용한다.

### UDP Flood

UDP의 비연결/비신뢰성 때문에 공격이 용이하다.
echo, chargen 서비스를 이용한다.
echo는 udp 7번 포트에서 동작하고 있다.
chargen은 udp 19번으로, 들어오는 UDP 패킷에 대해 0부터 512까지 무작위로 선택된 문자들을 가진 패킷으로 되돌려주는 서비스를 제공한다.

### TCP SYN Flood

### LAND attack

### Ping of Death

### Teardrop Attack

### Inconsistent Fragmentation